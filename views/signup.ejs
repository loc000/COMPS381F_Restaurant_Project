<div class="modal fade" id="modalRegisterForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold">Sign up</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="/api/user/signup" method="post" id="signup_form">
            <div class="modal-body mx-3">

                <div class="md-form mb-5">
                    <i class="fas fa-user prefix grey-text"></i>
                    <input type="text" minlength="3" required id="orangeForm-name" name="userid" class="form-control validate">
                    <label data-error="wrong" data-success="right" for="orangeForm-name">Your username</label>
                </div>
                <div class="md-form mb-4">
                    <i class="fas fa-lock prefix grey-text"></i>
                    <input type="password" minlength="8" required id="orangeForm-pass" name="password" class="form-control validate">
                    <label data-error="wrong" data-success="right" for="orangeForm-pass">Your password</label>
                </div>

            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button class="btn btn-deep-orange" id="signup_button" onclick="signup()">Sign up</button>
            </div>
            </form>
        </div>
    </div>
</div>
<script>
    function signup() {

        $("#signup_button").prop("disabled", true);
        $("#signup_button").html("<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n" +
            "  Loading...")
        $("#signup_form").submit(function(e) {

            var form = $(this);
            var url = form.attr('action');

            $.ajax({
                type: "POST",
                url: url,
                data: form.serialize(), // serializes the form's elements.
                success: function(data)
                {
                    alert("Sign up success. You can login now."); // show response from the script.
                    $('#modalRegisterForm').modal('hide')
                    $('#modalLoginForm').modal('show')
                },
            }).fail(function( xhr, textStatus ) {
                alert( JSON.parse( xhr.responseText +"").status );
                location.reload();
            }).done(function () {
                document.getElementById('signup_form').reset();

                $("#signup_button").prop("disabled", false);
                $("#signup_button").html("Sign up")
            });

            e.preventDefault(); // avoid to execute the actual submit of the form.
        });
        $("#signup_form").submit();
    }




</script>

<div class="text-center">
    <a href="" class="btn btn-default btn-rounded mb-4" data-toggle="modal" data-target="#modalRegisterForm">Launch
        Modal Register Form</a>
</div>